From 63ffaf7d591e285b19ae7cb6182ac665700209e4 Mon Sep 17 00:00:00 2001
From: 12101111 <w12101111@gmail.com>
Date: Sun, 4 Jan 2026 21:35:18 +0800
Subject: [PATCH 09/11] Add support for riscv64, loong64

---
 build/gulpfile.scan.ts                                 |  2 ++
 build/gulpfile.vscode.linux.ts                         |  6 ++++++
 build/gulpfile.vscode.ts                               |  2 ++
 .../extensionManagement/common/extensionManagement.ts  | 10 ++++++++++
 src/vs/platform/extensions/common/extensions.ts        |  2 ++
 5 files changed, 22 insertions(+)

diff --git a/build/gulpfile.scan.ts b/build/gulpfile.scan.ts
index 19e50c016e6..2cced2a31ad 100644
--- a/build/gulpfile.scan.ts
+++ b/build/gulpfile.scan.ts
@@ -22,6 +22,8 @@ const BUILD_TARGETS = [
 	{ platform: 'linux', arch: 'x64' },
 	{ platform: 'linux', arch: 'armhf' },
 	{ platform: 'linux', arch: 'arm64' },
+	{ platform: 'linux', arch: 'riscv64' },
+	{ platform: 'linux', arch: 'loong64' },
 ];
 
 // The following files do not have PDBs downloaded for them during the download symbols process.
diff --git a/build/gulpfile.vscode.linux.ts b/build/gulpfile.vscode.linux.ts
index aab174b7e31..73d0c2fb645 100644
--- a/build/gulpfile.vscode.linux.ts
+++ b/build/gulpfile.vscode.linux.ts
@@ -30,6 +30,8 @@ function getDebPackageArch(arch: string): string {
 		case 'x64': return 'amd64';
 		case 'armhf': return 'armhf';
 		case 'arm64': return 'arm64';
+		case 'riscv64': return 'riscv64';
+		case 'loong64': return 'loong64';
 		default: throw new Error(`Unknown arch: ${arch}`);
 	}
 }
@@ -140,6 +142,8 @@ function getRpmPackageArch(arch: string): string {
 		case 'x64': return 'x86_64';
 		case 'armhf': return 'armv7hl';
 		case 'arm64': return 'aarch64';
+		case 'riscv64': return 'riscv64';
+		case 'loong64': return 'loong64';
 		default: throw new Error(`Unknown arch: ${arch}`);
 	}
 }
@@ -335,6 +339,8 @@ const BUILD_TARGETS = [
 	{ arch: 'x64' },
 	{ arch: 'armhf' },
 	{ arch: 'arm64' },
+	{ arch: 'riscv64' },
+	{ arch: 'loong64' },
 ];
 
 BUILD_TARGETS.forEach(({ arch }) => {
diff --git a/build/gulpfile.vscode.ts b/build/gulpfile.vscode.ts
index 9466400faf1..89daca0b02f 100644
--- a/build/gulpfile.vscode.ts
+++ b/build/gulpfile.vscode.ts
@@ -508,6 +508,8 @@ const BUILD_TARGETS = [
 	{ platform: 'linux', arch: 'x64' },
 	{ platform: 'linux', arch: 'armhf' },
 	{ platform: 'linux', arch: 'arm64' },
+	{ platform: 'linux', arch: 'riscv64' },
+	{ platform: 'linux', arch: 'loong64' },
 ];
 BUILD_TARGETS.forEach(buildTarget => {
 	const dashed = (str: string) => (str ? `-${str}` : ``);
diff --git a/src/vs/platform/extensionManagement/common/extensionManagement.ts b/src/vs/platform/extensionManagement/common/extensionManagement.ts
index ab11f6bb950..4fd7a6476b6 100644
--- a/src/vs/platform/extensionManagement/common/extensionManagement.ts
+++ b/src/vs/platform/extensionManagement/common/extensionManagement.ts
@@ -46,6 +46,8 @@ export function TargetPlatformToString(targetPlatform: TargetPlatform) {
 		case TargetPlatform.LINUX_X64: return 'Linux 64 bit';
 		case TargetPlatform.LINUX_ARM64: return 'Linux ARM 64';
 		case TargetPlatform.LINUX_ARMHF: return 'Linux ARM';
+		case TargetPlatform.LINUX_RISCV64: return 'Linux RISC-V 64';
+		case TargetPlatform.LINUX_LOONG64: return 'Linux LoongArch 64';
 
 		case TargetPlatform.ALPINE_X64: return 'Alpine Linux 64 bit';
 		case TargetPlatform.ALPINE_ARM64: return 'Alpine ARM 64';
@@ -69,6 +71,8 @@ export function toTargetPlatform(targetPlatform: string): TargetPlatform {
 		case TargetPlatform.LINUX_X64: return TargetPlatform.LINUX_X64;
 		case TargetPlatform.LINUX_ARM64: return TargetPlatform.LINUX_ARM64;
 		case TargetPlatform.LINUX_ARMHF: return TargetPlatform.LINUX_ARMHF;
+		case TargetPlatform.LINUX_RISCV64: return TargetPlatform.LINUX_RISCV64;
+		case TargetPlatform.LINUX_LOONG64: return TargetPlatform.LINUX_LOONG64;
 
 		case TargetPlatform.ALPINE_X64: return TargetPlatform.ALPINE_X64;
 		case TargetPlatform.ALPINE_ARM64: return TargetPlatform.ALPINE_ARM64;
@@ -104,6 +108,12 @@ export function getTargetPlatform(platform: Platform | 'alpine', arch: string |
 			if (arch === 'arm') {
 				return TargetPlatform.LINUX_ARMHF;
 			}
+			if (arch === 'riscv64') {
+				return TargetPlatform.LINUX_RISCV64;
+			}
+			if (arch === 'loong64') {
+				return TargetPlatform.LINUX_LOONG64;
+			}
 			return TargetPlatform.UNKNOWN;
 
 		case 'alpine':
diff --git a/src/vs/platform/extensions/common/extensions.ts b/src/vs/platform/extensions/common/extensions.ts
index 021ad016e02..693ecf2bfb2 100644
--- a/src/vs/platform/extensions/common/extensions.ts
+++ b/src/vs/platform/extensions/common/extensions.ts
@@ -340,6 +340,8 @@ export const enum TargetPlatform {
 	LINUX_X64 = 'linux-x64',
 	LINUX_ARM64 = 'linux-arm64',
 	LINUX_ARMHF = 'linux-armhf',
+	LINUX_RISCV64 = 'linux-riscv64',
+	LINUX_LOONG64 = 'linux-loong64',
 
 	ALPINE_X64 = 'alpine-x64',
 	ALPINE_ARM64 = 'alpine-arm64',
-- 
2.53.0

