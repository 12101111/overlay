From 0c4ef48233b1694a19e3c28ba71f7e310b147f3c Mon Sep 17 00:00:00 2001
From: 12101111 <w12101111@gmail.com>
Date: Fri, 8 May 2020 20:47:03 +0800
Subject: [PATCH 06/10] Allow --offline in args

---
 build/npm/postinstall.js | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/build/npm/postinstall.js b/build/npm/postinstall.js
index 7b8b710636..d3dafad880 100644
--- a/build/npm/postinstall.js
+++ b/build/npm/postinstall.js
@@ -20,8 +20,8 @@ function yarnInstall(location, opts) {
 	const raw = process.env['npm_config_argv'] || '{}';
 	const argv = JSON.parse(raw);
 	const original = argv.original || [];
-	const args = original.filter(arg => arg === '--ignore-optional' || arg === '--frozen-lockfile');
-
+	const passargs = ['--ignore-optional', '--frozen-lockfile', '--offline', '--no-progress', '--verbose'];
+	const args = original.filter(arg => passargs.includes(arg));
 	console.log(`Installing dependencies in ${location}...`);
 	console.log(`$ yarn ${args.join(' ')}`);
 	const result = cp.spawnSync(yarn, args, opts);
-- 
2.27.0

