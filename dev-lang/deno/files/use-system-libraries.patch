diff --git a/Cargo.toml b/Cargo.toml
index 1eeaa93..bc679a8 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -161,7 +161,7 @@ tokio-util = "0.7.4"
 tower-lsp = { version = "=0.20.0", features = ["proposed"] }
 url = { version = "2.3.1", features = ["serde", "expose_internals"] }
 uuid = { version = "1.3.0", features = ["v4"] }
-zstd = "=0.12.4"
+zstd = { version = "=0.12.4", features = ["pkg-config"] }
 elliptic-curve = { version = "0.13.4", features = ["alloc", "arithmetic", "ecdh", "std", "pem"] }
 p224 = { version = "0.13.0", features = ["ecdh"] }
 p256 = { version = "0.13.2", features = ["ecdh"] }
diff --git a/ext/ffi/Cargo.toml b/ext/ffi/Cargo.toml
index 37e93ab..517c6c3 100644
--- a/ext/ffi/Cargo.toml
+++ b/ext/ffi/Cargo.toml
@@ -18,7 +18,7 @@ deno_core.workspace = true
 dlopen2.workspace = true
 dynasmrt = "1.2.3"
 libffi = "=3.2.0"
-libffi-sys = "=2.3.0"
+libffi-sys = { version = "=2.3.0", features = ["system"] }
 serde.workspace = true
 serde-value = "0.7"
 serde_json = "1.0"
