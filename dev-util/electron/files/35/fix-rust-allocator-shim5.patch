diff --git a/build/rust/allocator/lib.rs b/build/rust/allocator/lib.rs
index 4e2dad3..32ba271 100644
--- a/build/rust/allocator/lib.rs
+++ b/build/rust/allocator/lib.rs
@@ -57,6 +57,10 @@ static GLOBAL: std::alloc::System = std::alloc::System;
 #[linkage = "weak"]
 static __rust_no_alloc_shim_is_unstable: u8 = 0;
 
+#[rustc_std_internal_symbol]
+#[linkage = "weak"]
+fn __rust_no_alloc_shim_is_unstable_v2() {}
+
 // Mangle the symbol name as rustc expects.
 #[cfg_attr(mangle_alloc_error_handler, rustc_std_internal_symbol)]
 #[cfg_attr(not(mangle_alloc_error_handler), no_mangle)]
